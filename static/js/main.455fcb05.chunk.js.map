{"version":3,"sources":["assets/images/download.svg","assets/images/download-icon.svg","assets/images/logo-data-mzcr.svg","assets/images/logo-uzis.svg","assets/images/logo-iba-mu.svg","assets/images/web_studio.svg","ColumnForm.js","assets/images/csv-file.svg","assets/images/close.svg","CsvPicker.js","DatasetMetadataForm.js","assets/images/upload.svg","DragAndDrop.js","Button.js","OpenDataTransformerApp.js","reportWebVitals.js","index.js","modules/parser.js","modules/transformer.js","modules/csvSchemaGenerator.js"],"names":["ColumnForm","index","columnName","handleChange","descriptionLengthLimit","useState","descriptionLength","setDescriptionLength","handleInput","event","target","name","value","className","htmlFor","type","defaultValue","onChange","id","input","length","slice","classList","add","nextSibling","remove","placeholder","CsvPicker","inputRef","setEncoding","setDelimiter","setFile","file","encodingRef","useRef","delimiterRef","useEffect","current","src","csvFile","alt","close","onClick","ref","files","e","DatasetMetadataForm","datasetMetadata","setDatasetMetadata","tags","setTags","setFormattedContent","useCallback","newTags","description","DragAndDrop","onDragOver","preventDefault","stopPropagation","handleDragOver","onDrop","fileList","dataTransfer","console","log","handleDrop","upload","Button","children","OpenDataTransformerApp","encoding","delimiter","title","filename","source","columnsMetadata","setColumnsMetadata","getConfig","overrideHeaders","keywords","columns","createWriter","streamSaver","createWriteStream","getWriter","setColumnState","payload","logoMzcr","click","onSubmit","undefined","reader","fileReaderStream","decoder","iconv","enableStreamingAPI","stream","decodeStream","parser","createParser","parse","headers","pipe","on","read","columnsData","forEach","datatype","loadCsvHeaders","map","item","download","config","transformer","createTransformer","transform","writer","row","write","TextEncoder","encode","schema","csvSchemaGenerator","generate","JSON","stringify","href","rel","downloadIcon","logoMu","logoUzis","logoWebStudio","WritableStream","ponyfill","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById","require","getParserConfig","conf","on_record","record","context","lines","Object","values","column","exports","createCsvStringifier","createArrayCsvStringifier","allowedDatatypes","parseValue","includes","Error","trim","parseInt","parseFloat","stringifier","recordDelimiter","datatypes","counter","data","parsedValues","push","stringifyRecords","module","url","Date","toISOString","tableSchema","titles"],"mappings":"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","file":"static/js/main.455fcb05.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/download.30c31dca.svg\";","export default __webpack_public_path__ + \"static/media/download-icon.47fd62fd.svg\";","export default __webpack_public_path__ + \"static/media/logo-data-mzcr.3d29bba8.svg\";","export default __webpack_public_path__ + \"static/media/logo-uzis.412624c0.svg\";","export default __webpack_public_path__ + \"static/media/logo-iba-mu.904293c3.svg\";","export default __webpack_public_path__ + \"static/media/web_studio.db15bc58.svg\";","import \"../src/assets/scss/_column-form.scss\";\n\nimport React, { useState } from \"react\";\n\nexport default function ColumnForm({\n  index,\n  columnName,\n  handleChange,\n  descriptionLengthLimit = 200,\n}) {\n  const [descriptionLength, setDescriptionLength] = useState(0);\n  const handleInput = (event) => {\n    handleChange(index, {\n      [event.target.name]: event.target.value,\n    });\n  };\n\n  const handleDescriptionChange = (event) => {\n    const input = event.target;\n    if (input.value.length > descriptionLengthLimit) {\n      input.value = input.value.slice(0, descriptionLengthLimit);\n      input.classList.add(\"has-border\");\n      input.nextSibling.classList.remove(\"hidden\");\n      return;\n    }\n    input.classList.remove(\"has-border\");\n    input.nextSibling.classList.add(\"hidden\");\n    handleChange(index, {\n      [input.name]: input.value,\n    });\n    setDescriptionLength(input.value.length);\n  };\n\n  return (\n    <div className=\"form-column\">\n      <div className=\"form-column__wrapper\">\n        <div className=\"form-column__name\">\n          <label htmlFor=\"name\">Název:</label>\n          <div>\n            <input\n              name=\"name\"\n              type=\"text\"\n              defaultValue={columnName}\n              onChange={handleInput}\n            />\n          </div>\n        </div>\n        <div className=\"form-column__select\">\n          <label htmlFor=\"datatype\">Datový typ:</label>\n          <div>\n            <select name=\"datatype\" id=\"datatype\" onChange={handleInput}>\n              <option value=\"string\">string</option>\n              <option value=\"integer\">integer</option>\n              <option value=\"float\">float</option>\n              <option value=\"boolean\">boolean</option>\n            </select>\n          </div>\n        </div>\n      </div>\n      <div className=\"form-column-description__label\">\n        <label htmlFor=\"description\">Popis:</label>\n        <span className=\"form-column-description__indicator\">\n          {descriptionLength}/{descriptionLengthLimit}\n        </span>\n      </div>\n      <input\n        className=\"form-column-description__input\"\n        name=\"description\"\n        type=\"text\"\n        onChange={handleDescriptionChange}\n        placeholder={`Maximálně ${descriptionLengthLimit} znaků`}\n      />\n      <div className=\"warning hidden\">Dosáhli jste limitu počtu znaků!</div>\n    </div>\n  );\n}\n","export default __webpack_public_path__ + \"static/media/csv-file.a22d929a.svg\";","export default __webpack_public_path__ + \"static/media/close.7dda5159.svg\";","import \"./assets/scss/_form.scss\";\n\nimport csvFile from \"./assets/images/csv-file.svg\";\nimport close from \"./assets/images/close.svg\";\n\nimport { useEffect, useRef } from \"react\";\n\nexport default function CsvPicker({\n  inputRef,\n  setEncoding,\n  setDelimiter,\n  setFile,\n  file,\n}) {\n  const encodingRef = useRef();\n  const delimiterRef = useRef();\n\n  useEffect(() => {\n    setEncoding(encodingRef.current.value);\n    setDelimiter(delimiterRef.current.value);\n  }, []);\n\n  return (\n    <div className={`form-upload ${!!file ? \"\" : \"visually-hidden\"}`}>\n      <div>Nahraný soubor:</div>\n      <div className=\"form-upload__input\">\n        {!!file && (\n          <>\n            <div>\n              <img src={csvFile} alt=\"csv file\"/>\n              <span>{file.name}</span>\n            </div>\n            <img\n              src={close}\n              alt=\"zavřít\"\n              onClick={() => {\n                setFile();\n              }}\n            />\n          </>\n        )}\n      </div>\n      <div className=\"form-upload__hidden-input visually-hidden\">\n        <label htmlFor=\"file\">Nahraný soubor:</label>\n        <div>\n          <input\n            name=\"file\"\n            type=\"file\"\n            ref={inputRef}\n            onChange={() => setFile(inputRef.current.files[0])}\n          />\n        </div>\n      </div>\n      <div className=\"form-upload__menu\">\n        <div className=\"form-upload__selects\">\n          <div>\n            <label htmlFor=\"encoding\">Použité kódování:</label>\n            <div className=\"form-upload__selects--label\">\n              <select\n                ref={encodingRef}\n                onChange={(e) => setEncoding(e.target.value)}\n                name=\"encoding\"\n                id=\"encoding\"\n              >\n                <option value=\"win1250\">win1250</option>\n                <option value=\"utf8\">utf8</option>\n              </select>\n            </div>\n          </div>\n          <div>\n            <label htmlFor=\"delimiter\">Použitý oddělovač:</label>\n            <div className=\"form-upload__selects--label\">\n              <select\n                ref={delimiterRef}\n                onChange={(e) => setDelimiter(e.target.value)}\n                name=\"delimiter\"\n                id=\"delimiter\"\n              >\n                <option value=\";\">;</option>\n                <option value=\",\">,</option>\n              </select>\n            </div>\n          </div>\n        </div>\n        <div>\n          <input type=\"submit\" value=\"Načíst\" className=\"button--submit\" />\n        </div>\n      </div>\n    </div>\n  );\n}\n","import \"@pathofdev/react-tag-input/build/index.css\";\nimport \"./assets/scss/_metadata-form.scss\";\n\nimport ReactTagInput from \"@pathofdev/react-tag-input\";\nimport { useCallback } from \"react\";\n\nexport default function DatasetMetadataForm({\n  datasetMetadata,\n  setDatasetMetadata,\n  tags,\n  setTags,\n  descriptionLengthLimit = 500,\n}) {\n  const handleChange = (event) => {\n    setDatasetMetadata({\n      ...datasetMetadata,\n\n      [event.target.name]: event.target.value,\n    });\n  };\n\n  const setFormattedContent = useCallback(\n    (event) => {\n      setDatasetMetadata({\n        ...datasetMetadata,\n        [event.target.name]: event.target.value.slice(\n          0,\n          descriptionLengthLimit\n        ),\n      });\n    },\n    [descriptionLengthLimit, datasetMetadata]\n  );\n\n  return (\n    <div className=\"metadata-from\">\n      <div className=\"metadata-from__heading\">\n        <h2>Popis datové sady</h2>\n      </div>\n      <div className=\"metadata-from__title\">\n        <label htmlFor=\"title\">Titulek:</label>\n        <div>\n          <input\n            name=\"title\"\n            type=\"text\"\n            onChange={handleChange}\n            placeholder=\"Například “COVID, Červenec 2021”\"\n          />\n        </div>\n      </div>\n      <div className=\"metadata-from__filename\">\n        <label htmlFor=\"filename\">Název souboru:</label>\n        <div>\n          <input\n            name=\"filename\"\n            type=\"text\"\n            onChange={handleChange}\n            placeholder={'Například \"covid-cervenec-21.csv\"'}\n          />\n        </div>\n      </div>\n      <div className=\"metadata-from__source\">\n        <label htmlFor=\"source\">Zdroj:</label>\n        <div>\n          <input\n            name=\"source\"\n            type=\"text\"\n            onChange={handleChange}\n            placeholder=\"Například “ÚZIS ČR”\"\n          />\n        </div>\n      </div>\n      <div className=\"metadata-from__tags\">\n        <label htmlFor=\"tags\">Tagy:</label>\n        <div>\n          <ReactTagInput\n            name=\"tags\"\n            tags={tags}\n            placeholder=\"Zadejte a stiskněte ENTER\"\n            onChange={(newTags) => setTags(newTags)}\n          />\n        </div>\n      </div>\n      <div className=\"metadata-from__description\">\n        <div className=\"metadata-from__description--label\">\n          <label htmlFor=\"description\">Popis:</label>\n          <div>\n            {datasetMetadata.description.length}/{descriptionLengthLimit}\n          </div>\n        </div>\n        <div>\n          <textarea\n            name=\"description\"\n            value={datasetMetadata.description}\n            onChange={setFormattedContent}\n            placeholder=\"Maximálně 500 znaků\"\n            className={\n              descriptionLengthLimit === datasetMetadata.description.length\n                ? \"has-border\"\n                : \"\"\n            }\n          />\n        </div>\n        {descriptionLengthLimit === datasetMetadata.description.length ? (\n          <div className=\"warning\">Dosáhli jste limitu počtu znaků!</div>\n        ) : (\n          \"\"\n        )}\n      </div>\n    </div>\n  );\n}\n","export default __webpack_public_path__ + \"static/media/upload.ecc3d64c.svg\";","import \"./assets/scss/_drag-and-drop.scss\";\n\nimport upload from \"./assets/images/upload.svg\";\n\nexport default function DragAndDrop({ file, setFile, onClick }) {\n  const handleDragOver = (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n  };\n\n  const handleDrop = (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n    const fileList = e.dataTransfer.files;\n    setFile(fileList[0]);\n    console.log(fileList);\n  };\n\n  return (\n    <div\n      className={`drag-drop-zone${file ? \"--hidden\" : \"\"}`}\n      onDragOver={(e) => handleDragOver(e)}\n      onDrop={(e) => handleDrop(e)}\n      onClick={onClick}\n    >\n      <img src={upload} alt=\"upload\" />\n      <p>\n        Klikněte pro nahrání <strong>CSV. souboru</strong> nebo ho sem\n        přetáhněte\n      </p>\n    </div>\n  );\n}\n","import \"./assets/scss/_buttons.scss\"\n\n\nexport default function Button({onClick, children, type, name}) {\n\n    return(\n        <button onClick={onClick} className={`button--${type}`}>\n            <img src={name} alt={`${name} ikonka`}/>\n            {children}\n        </button>\n    )\n}","import \"./assets/scss/_app.scss\";\nimport \"./assets/scss/_footer.scss\";\n\nimport download from \"./assets/images/download.svg\";\nimport downloadIcon from \"./assets/images/download-icon.svg\";\n\nimport logoMzcr from \"./assets/images/logo-data-mzcr.svg\";\nimport logoUzis from \"./assets/images/logo-uzis.svg\";\nimport logoMu from \"./assets/images/logo-iba-mu.svg\";\nimport logoWebStudio from \"./assets/images/web_studio.svg\";\n\nimport { useRef } from \"react\";\nimport { useState } from \"react\";\nimport fileReaderStream from \"filereader-stream\";\nimport iconv from \"iconv-lite\";\nimport stream from \"stream-browserify\";\nimport { parse } from \"csv-parse/dist/esm/index.js\";\nimport { createParser } from \"./modules/parser\";\nimport { createTransformer } from \"./modules/transformer\";\nimport { transform } from \"stream-transform/dist/esm/index.js\";\nimport * as ponyfill from \"web-streams-polyfill/ponyfill\";\nimport streamSaver from \"streamsaver\";\nimport csvSchemaGenerator from \"./modules/csvSchemaGenerator\";\nimport ColumnForm from \"./ColumnForm\";\nimport CsvPicker from \"./CsvPicker\";\nimport DatasetMetadataForm from \"./DatasetMetadataForm\";\nimport DragAndDrop from \"./DragAndDrop\";\nimport Button from \"./Button\";\n\nstreamSaver.WritableStream = ponyfill.WritableStream;\n\nexport default function OpenDataTransformerApp() {\n  const [encoding, setEncoding] = useState();\n  const [delimiter, setDelimiter] = useState();\n  const [datasetMetadata, setDatasetMetadata] = useState({\n    title: \"\",\n    description: \"\",\n    filename: \"\",\n    source: \"\",\n  });\n  const [tags, setTags] = useState([]);\n  const [columnsMetadata, setColumnsMetadata] = useState([]);\n  const [file, setFile] = useState();\n\n  const inputRef = useRef();\n\n  function getConfig() {\n    return {\n      encoding: encoding,\n      delimiter: delimiter,\n      overrideHeaders: true,\n      ...datasetMetadata,\n      keywords: tags,\n      columns: columnsMetadata,\n    };\n  }\n\n  function createWriter(filename) {\n    return streamSaver.createWriteStream(filename).getWriter();\n  }\n\n  function handleDownloadCsv() {\n    const config = getConfig();\n\n    if (file === undefined) {\n      console.log(\"Please select file.\");\n      return;\n    }\n\n    const reader = (file) => fileReaderStream(file);\n    const decoder = () => {\n      iconv.enableStreamingAPI(stream);\n      return iconv.decodeStream(config.encoding);\n    };\n    const parser = createParser(config, parse);\n    const transformer = createTransformer(config, transform);\n    const writer = createWriter(config.filename);\n\n    reader(file)\n      .pipe(decoder())\n      .pipe(parser)\n      .pipe(transformer)\n      .on(\"readable\", function () {\n        let row;\n        while ((row = transformer.read()) !== null) {\n          writer.write(new TextEncoder().encode(row));\n        }\n      })\n      .on(\"finish\", function () {\n        writer.close();\n      });\n  }\n\n  function handleDownloadMetadata() {\n    const config = getConfig();\n\n    const schema = csvSchemaGenerator.generate(config);\n    const writer = createWriter(config.filename + \"-metadata.json\");\n    writer.write(new TextEncoder().encode(JSON.stringify(schema, null, 4)));\n    writer.close();\n  }\n\n  const handleSubmit = (event) => {\n    event.preventDefault();\n    loadCsvHeaders();\n  };\n\n  function loadCsvHeaders() {\n    if (file === undefined) {\n      console.log(\"Please select file.\");\n      return;\n    }\n\n    const reader = (file) => fileReaderStream(file);\n    const decoder = () => {\n      iconv.enableStreamingAPI(stream);\n      return iconv.decodeStream(encoding);\n    };\n    const parser = createParser(\n      { delimiter: delimiter, overrideHeaders: false },\n      parse\n    );\n\n    let headers = [];\n    reader(file)\n      .pipe(decoder())\n      .pipe(parser)\n      .on(\"readable\", () => {\n        if (headers.length !== 0) {\n          return;\n        }\n\n        headers = parser.read();\n        let columnsData = [];\n        headers.forEach((value, index) => {\n          columnsData[index] = {\n            name: value,\n            datatype: \"string\",\n            description: \"\",\n          };\n        });\n        setColumnsMetadata(columnsData);\n      });\n  }\n\n  function setColumnState(index, payload) {\n    columnsMetadata[index] = {\n      ...columnsMetadata[index],\n      ...payload,\n    };\n    setColumnsMetadata(columnsMetadata);\n  }\n\n  function DragAnDropOnClick() {\n    inputRef.current.click();\n  }\n\n  return (\n    <>\n      <div className=\"content\">\n        <div className=\"wrapper\">\n          <div className=\"container\">\n            <div className=\"header\">\n              <img src={logoMzcr} alt=\"logo-data-mzcr\" />\n              <h1>Open Data Transformer</h1>\n            </div>\n          </div>\n        </div>\n        <div className=\"wrapper__metadata-form\">\n          <div className=\"container\">\n            <DragAndDrop\n              file={file}\n              setFile={setFile}\n              onClick={DragAnDropOnClick}\n            />\n\n            <form onSubmit={handleSubmit}>\n              <CsvPicker\n                inputRef={inputRef}\n                setEncoding={setEncoding}\n                setDelimiter={setDelimiter}\n                file={file}\n                setFile={setFile}\n              />\n              {!!columnsMetadata.length && (\n                <DatasetMetadataForm\n                  datasetMetadata={datasetMetadata}\n                  setDatasetMetadata={setDatasetMetadata}\n                  tags={tags}\n                  setTags={setTags}\n                />\n              )}\n            </form>\n          </div>\n        </div>\n\n        <div\n          className={`wrapper${\n            !!columnsMetadata.length ? \"__column-form\" : \"\"\n          }`}\n        >\n          <div className=\"container\">\n            <form>\n              {!!columnsMetadata.length && (\n                <div>\n                  <h2 className=\"form-column__heading\">\n                    Popis sloupcu datové sady\n                  </h2>\n                </div>\n              )}\n              <ul>\n                {!!columnsMetadata.length &&\n                  columnsMetadata.map((item, index) => {\n                    return (\n                      <li key={item.name}>\n                        <ColumnForm\n                          index={index}\n                          columnName={item.name}\n                          key={index}\n                          handleChange={setColumnState}\n                        />\n                      </li>\n                    );\n                  })}\n              </ul>\n            </form>\n          </div>\n        </div>\n\n        {!!columnsMetadata.length && (\n          <div className=\"container\">\n            <div className=\"form-buttons\">\n              <Button\n                type=\"download\"\n                name={download}\n                onClick={handleDownloadCsv}\n              >\n                Stáhnout CSV\n              </Button>\n              <Button\n                type=\"download\"\n                name={download}\n                onClick={handleDownloadMetadata}\n              >\n                Stáhnout metadata\n              </Button>\n            </div>\n            <div className=\"text--center\">\n              <p>Nezapomeňte validovat vaši datovou sadu</p>\n              <a\n                href=\"https://csvw.opendata.cz/\"\n                target=\"_blank\"\n                rel={\"noreferrer\"}\n                className=\"button--validate\"\n              >\n                Validovat data\n                <img src={downloadIcon} alt={`${downloadIcon} ikonka`} />\n              </a>\n            </div>\n          </div>\n        )}\n      </div>\n\n      <footer>\n        <div>\n          <div className=\"container\">\n            <div className=\"footer__logo\">\n              <a\n                href=\"http://www.iba.muni.cz/\"\n                target=\"_blank\"\n                rel=\"noreferrer noopener\"\n                title=\"Institut biostatistiky a analýz Lékařské fakulty Masarykovy univerzity\"\n                aria-label=\"Institut biostatistiky a analýz Lékařské fakulty Masarykovy univerzity\"\n              >\n                <img\n                  src={logoMu}\n                  alt=\"Institut biostatistiky a analýz Lékařské fakulty Masarykovy univerzity\"\n                />\n              </a>\n              <a\n                href=\"https://www.uzis.cz/\"\n                target=\"_blank\"\n                rel=\"noreferrer noopener\"\n                title=\"Ústav zdravotnických informací a statistiky České republiky\"\n                aria-label=\"Ústav zdravotnických informací a statistiky České republiky\"\n              >\n                <img\n                  src={logoUzis}\n                  alt=\"Ústav zdravotnických informací a statistiky České republiky\"\n                />\n              </a>\n              <div>\n                společné pracoviště <br />{\" \"}\n                <a\n                  href=\"http://www.iba.muni.cz/\"\n                  target=\"_blank\"\n                  rel=\"noreferrer noopener\"\n                  title=\"Institut biostatistiky a analýz Lékařské fakulty Masarykovy univerzity\"\n                  aria-label=\"Institut biostatistiky a analýz Lékařské fakulty Masarykovy univerzity\"\n                >\n                  IBA LF MU\n                </a>{\" \"}\n                a{\" \"}\n                <a\n                  href=\"https://www.uzis.cz/\"\n                  target=\"_blank\"\n                  rel=\"noreferrer noopener\"\n                  title=\"Ústav zdravotnických informací a statistiky ČR\"\n                  aria-label=\"Ústav zdravotnických informací a statistiky České republiky\"\n                >\n                  ÚZIS ČR\n                </a>\n              </div>\n            </div>\n          </div>\n        </div>\n        <div className=\"wrapper__footer\">\n          <div className=\"container\">\n            <div>\n              <button\n                className=\"button--cookies\"\n                aria-label=\"Prohlédnout si nastavení cookies souborů\"\n              >\n                COOKIES\n              </button>\n              <span className=\"footer--vertical\" />\n              <a\n                href=\"https://www.uzis.cz/index.php?pg=kontakt\"\n                target=\"_blank\"\n              >\n                HELPDESK\n              </a>\n            </div>\n            <a\n              href=\"https://webstudio.team/\"\n              target=\"_blank\"\n              rel=\"noreferrer noopener\"\n              title=\"webstudio.team\"\n              aria-label=\"Webová stránka webstudio.team (externí odkaz, nová záložka)\"\n            >\n              <img src={logoWebStudio} alt=\"Web studio\" />\n            </a>\n          </div>\n        </div>\n      </footer>\n    </>\n  );\n}\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./assets/css/index.css\";\nimport OpenDataTransformerApp from \"./OpenDataTransformerApp\";\nimport reportWebVitals from \"./reportWebVitals\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <OpenDataTransformerApp />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","const { parse } = require(\"csv-parse\");\n\nfunction getParserConfig(config) {\n  let conf = {\n    delimiter: config.delimiter,\n  };\n\n  if (config.overrideHeaders) {\n    conf.on_record = function (record, context) {\n      if (context.lines === 1) {\n        return Object.values(config.columns).map((column) => column.name);\n      }\n\n      return record;\n    };\n  }\n\n  return conf;\n}\n\nfunction createParser(config, parser = parse) {\n  return parser(getParserConfig(config));\n}\n\nexports.createParser = createParser;\n","const createCsvStringifier = require(\"csv-writer\").createArrayCsvStringifier;\nconst { transform } = require(\"stream-transform\");\n\nconst allowedDatatypes = [\"string\", \"integer\", \"float\", \"boolean\"];\n\nfunction getStringifierConfig() {\n  return {\n    recordDelimiter: \"\\r\\n\",\n  };\n}\n\nfunction parseValue(value, datatype) {\n  if (!allowedDatatypes.includes(datatype)) {\n    throw new Error(`Datatype ${datatype} is not allowed or valid.`);\n  }\n\n  switch (datatype) {\n    case \"string\":\n      return value.trim();\n    case \"integer\":\n      return parseInt(value);\n    case \"float\":\n      return parseFloat(value);\n    case \"boolean\":\n      return [1, \"1\", true, \"true\"].includes(value);\n    default:\n      return value;\n  }\n}\n\nfunction createTransformer(config, transformer = transform) {\n  const stringifier = createCsvStringifier(getStringifierConfig());\n  const datatypes = Object.values(config.columns).map(\n    (column) => column.datatype\n  );\n  let counter = 0;\n\n  return transformer((data) => {\n    counter++;\n    let parsedValues = [];\n\n    if (counter === 1) {\n      //prevent parsing headers\n      parsedValues = data;\n    } else {\n      data.forEach((value, index) => {\n        const datatype = datatypes[index];\n        parsedValues.push(parseValue(value, datatype));\n      });\n    }\n\n    return stringifier.stringifyRecords([parsedValues]);\n  });\n}\n\nexports.createTransformer = createTransformer;\n","function generateSchemaColumns(columns) {\n  return columns.map((column) => {\n    return {\n      name: column.name,\n      titles: column.name,\n      datatype: column.datatype,\n      \"dc:description\": column.description,\n    };\n  });\n}\n\nfunction generate(config) {\n  return {\n    \"@context\": [\n      \"http://www.w3.org/ns/csvw\",\n      {\n        \"@language\": \"cs\",\n      },\n    ],\n    url: config.filename,\n    \"dc:title\": config.title,\n    \"dc:description\": config.description,\n    \"dc:source\": config.source,\n    \"dcat:keyword\": config.keywords,\n    \"dc:publisher\": {\n      \"schema:name\": \"\\u00daZIS \\u010cR\",\n      \"schema:url\": {\n        \"@id\": \"https://www.uzis.cz/\",\n      },\n    },\n    \"dc:license\": {\n      \"@id\":\n        \"https://data.gov.cz/podm\\u00ednky-u\\u017eit\\u00ed/voln\\u00fd-p\\u0159\\u00edstup/\",\n    },\n    \"dc:modified\": {\n      \"@value\": new Date().toISOString(),\n      \"@type\": \"xsd:dateTime\",\n    },\n    tableSchema: {\n      columns: generateSchemaColumns(config.columns),\n    },\n  };\n}\n\nmodule.exports = {\n  generate: generate,\n};\n"],"sourceRoot":""}